# 项目技术规范

## 🎯 技术栈配置

- **运行环境**: Node.js v18+
- **编程语言**: TypeScript
- **输出格式**: CommonJS (cjs)
- **包管理工具**: pnpm（禁止使用 npm/yarn）
- **单元测试**: Jest
- **代码规范**: ESLint + Prettier
- **类型检查**: 严格模式（strict: true）

## 📦 项目结构

```
src/                 # 核心源码
├── index.ts        # 模块入口
├── utils/          # 工具函数
├── services/       # 外部服务封装
├── types/          # 类型定义
tests/              # 单元测试文件夹
├── index.test.ts
.trae/
├── project_rules.md
├── memory_bank/
```

## 📐 开发原则

- 所有函数模块必须使用明确的类型注解
- 所有工具函数应配套测试用例（Jest）
- 所有模块必须支持 Tree-shaking（尽量使用纯函数）
- 函数/类注释需包含用途说明、参数定义和示例用法
- 严格遵循 ESLint + Prettier 风格
- 初始化与依赖安装必须使用 pnpm

## 🧪 单元测试规则

- 所有核心逻辑必须编写测试覆盖（建议 90% 覆盖率以上）
- 测试文件放在 `tests/` 目录下
- 测试框架：Jest（默认支持 TypeScript）

## 🚫 严格禁止

- 禁止在任何地方使用 `npm` 或 `yarn`
- 禁止生成无类型注解的函数/类
- 禁止使用默认导出（保持命名导出）
- 禁止将测试代码混入生产模块（必须隔离）
- 禁止生成无注释、无文档说明的函数/类

## 🧠 输出要求

- 所有模块文件需为 `.ts` 格式
- 所有导出需为具名导出
- 所有函数、类、类型定义必须包含注释说明
- 测试代码必须与主模块一一对应，覆盖所有边界情况